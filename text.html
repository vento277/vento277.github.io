<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" charset="UTF-8">
    <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
    <title>Investments</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="icon" type="image/x-icon" href="assets/favicon/favicon.ico">
    <style>
        body{
            max-width: 100%;
        }
        .header {
            text-align: center; 
            display: flex;
            flex-direction: column;
            align-items: center; 
            margin: 0;
            padding: 0;
        }
        .content {
            max-width: 80%;
            margin: 0 auto; /* Centers horizontally */
            display: flex;
        }
        .half-section {
            flex: 0 0 48%;
            max-width: 48%;
            margin: 0 5px;
        }
        table{
            width: 100%;
            margin-bottom: 3%;
        }
        th{
            background: inherit;
        }
        table, th, td {
            border: 1px solid black;
        }
        svg.graph-svg {
            width: 100%;
            height: 400px;
            overflow: visible;
        }
        .axis, .grid-line {
            stroke: black;
            stroke-width: 1;
        }
        .solid-line {
            fill: none;
            stroke: black;
            stroke-width: 2;
        }
        .dotted-line {
            fill: none;
            stroke: black;
            stroke-width: 2;
            stroke-dasharray: 5, 5;
        }
        .data-point {
            fill: black;
            r: 1;
            cursor: pointer;
        }
        .label, .tooltip, .legend {
            fill: black;
            font-family: Arial, sans-serif;
            font-size: 12px;
        }
        .tooltip {
            visibility: hidden;
            font-size: 12px;
            pointer-events: none;
        }
        .legend-line {
            stroke: black;
            stroke-width: 2;
        }
        @media (max-width: 1020px) {
            body{
                max-width: 60%;
            }
        }
        @media (max-width: 800px) {
            body{
                max-width: 90%;
            }
        }
    </style>
</head>
    
<body>
    <section class = "header">
    <p style="margin-bottom: 20%;"></p>
    <img style="max-width: 5%; display: block; margin-left: auto; margin-right: auto; width: 100%;" src="assets/img/signature.png">
    <p style="text-align: center; font-size: 20px">INVESTMENTS</p>
    <p style="text-align: center;">Aiming to preserve and grow my family's capital.</p>
    </section>
    
    <hr style = "max-width: 80%; margin-bottom: 2%;">

    <section class = "content">
        <section class = "half-section">
            <table>
                <tr>
                    <th colspan="4">Reports</th>
                </tr>
                <tr>
                    <td><a href="">Q1 2025</a></td>
                    <td><a href="">Q2 2025</a></td>
                    <td><a href="">Q3 2025</a></td>
                    <td><a href="">Q4 2025</a></td>
                </tr>
                <tr>
                    <td><a href="">NA</a></td>
                    <td><a href="">NA</a></td>
                    <td><a href="investments/240930.pdf">Q3 2024</a></td>
                    <td><a href="">Q4 2024</a></td>
                </tr>
            </table>
        </section>
        
        <section class = "half-section">
            <table>
                <tr>
                    <th>Performance</th>
                </tr>
                <tr>
                    <td>
                        <svg id="graph" class="graph-svg"></svg>
                    </td>
                </tr>
            </table>
        </section>



    </section>









    <br>
</body>
<script>
    const dataPoints1 = [
        ["Incep.", 100],
        ["Q3'24", 105.22],
        ["Q4'24", 113.58]
    ];

    const dataPoints2 = [
        ["24", 100],
        ["Q3'24", 104.56],
        ["Q4'24", 113.77]
    ];

    const svg = document.getElementById('graph');
    const graphContainer = svg.parentElement;
    const padding = 40;

    function updateGraph() {
        const width = graphContainer.clientWidth;
        const height = graphContainer.clientHeight;
        svg.setAttribute('width', width);
        svg.setAttribute('height', height);

        const allPoints = [...dataPoints1, ...dataPoints2];
        const yValues = allPoints.map(point => point[1]);
        const yMin = Math.floor(Math.min(...yValues) / 10) * 10;
        const yMax = Math.ceil(Math.max(...yValues) / 10) * 10;

        const scaleX = (index) => {
            return padding + (index / (dataPoints1.length - 1)) * (width - 2 * padding);
        };
        const scaleY = (y) => {
            return height - padding - ((y - yMin) / (yMax - yMin)) * (height - 2 * padding);
        };

        svg.innerHTML = '';

        svg.innerHTML += `
            <line x1="${padding}" y1="${padding}" x2="${padding}" y2="${height - padding}" class="axis" />
            <line x1="${padding}" y1="${height - padding}" x2="${width - padding}" y2="${height - padding}" class="axis" />
        `;

        const yRange = yMax - yMin;
        const yTickCount = Math.floor(yRange / 10) + 1;
        for (let i = 0; i < yTickCount; i++) {
            const yValue = yMin + i * 10;
            const y = scaleY(yValue);
            svg.innerHTML += `
                <line x1="${padding - 5}" y1="${y}" x2="${padding}" y2="${y}" class="grid-line" />
                <text x="${padding - 10}" y="${y + 4}" class="label" text-anchor="end">$${yValue}</text>
            `;
        }
        dataPoints1.forEach((point, index) => {
            const x = scaleX(index);
            svg.innerHTML += `
                <text x="${x}" y="${height - padding + 20}" class="label" text-anchor="middle">${point[0]}</text>
            `;
        });

        let pathData1 = '';
        dataPoints1.forEach((point, index) => {
            const x = scaleX(index);
            const y = scaleY(point[1]);
            pathData1 += index === 0 ? `M ${x},${y}` : ` L ${x},${y}`;
        });
        svg.innerHTML += `<path d="${pathData1}" class="solid-line" />`;

        let pathData2 = '';
        dataPoints2.forEach((point, index) => {
            const x = scaleX(index);
            const y = scaleY(point[1]);
            pathData2 += index === 0 ? `M ${x},${y}` : ` L ${x},${y}`;
        });
        svg.innerHTML += `<path d="${pathData2}" class="dotted-line" />`;

        [dataPoints1, dataPoints2].forEach((dataset, setIndex) => {
            dataset.forEach((point, index) => {
                const x = scaleX(index);
                const y = scaleY(point[1]);
                const pointId = `point-${setIndex}-${index}`;
                svg.innerHTML += `
                    <circle cx="${x}" cy="${y}" r="3.5" fill="black" class="data-point" id="${pointId}" />
                    <text x="${x + 10}" y="${y - 10}" class="tooltip" id="tooltip-${pointId}">${point[0]}, ${point[1]}</text>
                `;
            });
        });

        svg.innerHTML += `
            <g transform="translate(${width - padding - 80}, ${padding - 20})">
                <line x1="0" y1="0" x2="25" y2="0" class="legend-line solid-line" />
                <text x="30" y="4" class="legend">PK</text>
                <line x1="0" y1="15" x2="25" y2="15" class="legend-line dotted-line" />
                <text x="30" y="19" class="legend">VFV</text>
            </g>
        `;

        document.querySelectorAll('.data-point').forEach(point => {
            const tooltip = document.getElementById(`tooltip-${point.id}`);
        
            // Mouse events (desktop/MacBook)
            point.addEventListener('mouseover', () => {
                tooltip.style.visibility = 'visible';
            });
            point.addEventListener('mouseout', () => {
                tooltip.style.visibility = 'hidden';
            });
            point.addEventListener('mousemove', (e) => {
                const rect = svg.getBoundingClientRect();
                tooltip.setAttribute('x', e.clientX - rect.left + 10);
                tooltip.setAttribute('y', e.clientY - rect.top - 10);
            });
        
            // Touch events (iOS/mobile)
            point.addEventListener('touchstart', (e) => {
                e.preventDefault();
                tooltip.style.visibility = 'visible';
                const touch = e.touches[0];
                const rect = svg.getBoundingClientRect();
                tooltip.setAttribute('x', touch.clientX - rect.left + 10);
                tooltip.setAttribute('y', touch.clientY - rect.top - 10);
            });
            point.addEventListener('touchmove', (e) => {
                e.preventDefault();
                const touch = e.touches[0];
                const rect = svg.getBoundingClientRect();
                tooltip.setAttribute('x', touch.clientX - rect.left + 10);
                tooltip.setAttribute('y', touch.clientY - rect.top - 10);
            });
            point.addEventListener('touchend', (e) => {
                e.preventDefault();
                tooltip.style.visibility = 'hidden';
            });
        });
    }

    updateGraph();
    window.addEventListener('resize', updateGraph);
</script>
</html>
