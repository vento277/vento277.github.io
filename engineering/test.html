<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic Line Graph with Hover X-Axis</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: transparent;
        }
        
        .graph-container {
            position: relative;
            width: 500px;
            height: 300px;
        }

        svg {
            width: 100%;
            height: 100%;
            overflow: visible;
        }

        .axis, .grid-line {
            stroke: black;
            stroke-width: 1;
        }

        .x-axis-group {
            visibility: hidden; /* Hidden by default */
        }

        .graph-container:hover .x-axis-group {
            visibility: visible; /* Visible on hover */
        }

        .solid-line {
            fill: none;
            stroke: black;
            stroke-width: 2;
        }

        .dotted-line {
            fill: none;
            stroke: black;
            stroke-width: 2;
            stroke-dasharray: 5, 5;
        }

        .data-point {
            fill: black;
            r: 4;
            cursor: pointer;
        }

        .label {
            fill: black;
            font-family: Arial, sans-serif;
            font-size: 12px;
        }

        .tooltip {
            fill: black;
            font-family: Arial, sans-serif;
            font-size: 12px;
            visibility: hidden;
            pointer-events: none;
        }
    </style>
</head>
<body>
    <div class="graph-container">
        <svg id="graph"></svg>
    </div>

    <script>
        // Two sets of data points [xLabel, y]
        const dataPoints1 = [
            ["Jan", 10],
            ["Feb", 50],
            ["Mar", 30],
            ["Apr", 70],
            ["May", 20],
            ["Jun", 60]
        ];

        const dataPoints2 = [
            ["Jan", 20],
            ["Feb", 40],
            ["Mar", 60],
            ["Apr", 30],
            ["May", 50],
            ["Jun", 10]
        ];

        const svg = document.getElementById('graph');
        const width = 500;
        const height = 300;
        const padding = 40;

        // Extract Y values for dynamic scaling
        const allPoints = [...dataPoints1, ...dataPoints2];
        const yValues = allPoints.map(point => point[1]);
        const yMin = Math.floor(Math.min(...yValues) / 10) * 10; // Round down to nearest 10
        const yMax = Math.ceil(Math.max(...yValues) / 10) * 10;  // Round up to nearest 10

        // Scale functions
        const scaleX = (index) => {
            return padding + (index / (dataPoints1.length - 1)) * (width - 2 * padding);
        };
        const scaleY = (y) => {
            return height - padding - ((y - yMin) / (yMax - yMin)) * (height - 2 * padding);
        };

        // Draw Y-axis (always visible)
        svg.innerHTML += `
            <line x1="${padding}" y1="${padding}" x2="${padding}" y2="${height - padding}" class="axis" />
        `;

        // Y-axis ticks and labels (increments of 10)
        const yRange = yMax - yMin;
        const yTickCount = Math.floor(yRange / 10) + 1;
        for (let i = 0; i < yTickCount; i++) {
            const yValue = yMin + i * 10;
            const y = scaleY(yValue);
            svg.innerHTML += `
                <line x1="${padding - 5}" y1="${y}" x2="${padding}" y2="${y}" class="grid-line" />
                <text x="${padding - 10}" y="${y + 4}" class="label" text-anchor="end">${yValue}</text>
            `;
        }

        // Draw X-axis (hidden until hover) within a group
        svg.innerHTML += `
            <g class="x-axis-group">
                <line x1="${padding}" y1="${height - padding}" x2="${width - padding}" y2="${height - padding}" class="axis" />
            </g>
        `;

        // X-axis labels (text-based)
        dataPoints1.forEach((point, index) => {
            const x = scaleX(index);
            svg.innerHTML += `
                <text x="${x}" y="${height - padding + 20}" class="label x-axis-group" text-anchor="middle">${point[0]}</text>
            `;
        });

        // Draw solid line (dataPoints1)
        let pathData1 = '';
        dataPoints1.forEach((point, index) => {
            const x = scaleX(index);
            const y = scaleY(point[1]);
            pathData1 += index === 0 ? `M ${x},${y}` : ` L ${x},${y}`;
        });
        svg.innerHTML += `<path d="${pathData1}" class="solid-line" />`;

        // Draw dotted line (dataPoints2)
        let pathData2 = '';
        dataPoints2.forEach((point, index) => {
            const x = scaleX(index);
            const y = scaleY(point[1]);
            pathData2 += index === 0 ? `M ${x},${y}` : ` L ${x},${y}`;
        });
        svg.innerHTML += `<path d="${pathData2}" class="dotted-line" />`;

        // Add data points and tooltips for both datasets
        [dataPoints1, dataPoints2].forEach((dataset, setIndex) => {
            dataset.forEach((point, index) => {
                const x = scaleX(index);
                const y = scaleY(point[1]);
                const pointId = `point-${setIndex}-${index}`;
                svg.innerHTML += `
                    <circle cx="${x}" cy="${y}" class="data-point" id="${pointId}" />
                    <text x="${x + 10}" y="${y - 10}" class="tooltip" id="tooltip-${pointId}">${point[0]}, ${point[1]}</text>
                `;
            });
        });

        // Add hover functionality
        document.querySelectorAll('.data-point').forEach(point => {
            const tooltip = document.getElementById(`tooltip-${point.id}`);
            point.addEventListener('mouseover', () => {
                tooltip.style.visibility = 'visible';
            });
            point.addEventListener('mouseout', () => {
                tooltip.style.visibility = 'hidden';
            });
            point.addEventListener('mousemove', (e) => {
                tooltip.setAttribute('x', e.clientX - svg.getBoundingClientRect().left + 10);
                tooltip.setAttribute('y', e.clientY - svg.getBoundingClientRect().top - 10);
            });
        });
    </script>
</body>
</html>